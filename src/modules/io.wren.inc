// auto-generated file, do not modify
const char* ioModule = "class FileSystem {\n"
"  foreign static f_load(path, op)\n"
"  // foreign static f_write_buffer(path, buffer, op) {}\n"
"  // foreign static f_write_string(path, str, op) {}\n"
"  // foreign f_append(path, buffer, op) {}\n"
"\n"
"  static load(path) {\n"
"    var operation = AsyncOperation.init(null)\n"
"    f_load(path, operation)\n"
"    return operation\n"
"  }\n"
"\n"
"  foreign static loadSync(path)\n"
"\n"
"  /*\n"
"  // Overwrites entire path\n"
"  static write(path, buffer) {\n"
"    operation = AsyncOperation.init()\n"
"    operation.create(DataBuffer.create())\n"
"    if (buffer is String) {\n"
"      f_write_string(path, buffer, operation)\n"
"    } else if (buffer is DataBuffer) {\n"
"      f_write_buffer(path, buffer, operation)\n"
"    } else {\n"
"      Fiber.abort(\"Attempted to write unknown buffer type\")\n"
"    }\n"
"    return operation\n"
"  }\n"
"  */\n"
"\n"
"  // Append\n"
"\n"
"}\n"
"\n"
"foreign class AsyncOperation {\n"
"  construct init(empty) {}\n"
"\n"
"  foreign complete\n"
"  foreign result\n"
"\n"
"  // foreign error?\n"
"}\n"
"\n"
"// Stretchy buffer?\n"
"foreign class DataBuffer {\n"
"  construct init() {}\n"
"  foreign ready\n"
"  foreign f_length\n"
"  foreign f_data\n"
"\n"
"  length {\n"
"    if (ready) {\n"
"      return f_length\n"
"    } else {\n"
"      return null\n"
"    }\n"
"  }\n"
"\n"
"  data {\n"
"    if (ready) {\n"
"      return f_data\n"
"    } else {\n"
"      return null\n"
"    }\n"
"  }\n"
"  // TODO: Index value read and write\n"
"}\n"
"\n"
"/*\n"
"\n"
"API Experiment\n"
"\n"
"var operation = FileSystem.write(\"text.txt\", Buffer.text(\"Hello world\"))\n"
"if (operation.complete) {\n"
"  // do stuff\n"
"}\n"
"\n"
"\n"
"var opertion = FileSystem.read(\"test.txt\");\n"
"if (operation.complete) {\n"
"  var buffer = operation.data\n"
"  System.print(buffer.length)\n"
"  System.print(buffer.data)\n"
"}\n"
"\n"
"*/\n"
"";
